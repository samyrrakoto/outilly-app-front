<div id="proposition" class="content">

  <!-- If no bid has been placed -->
  <div *ngIf="!hasBidded()" class="content">
    <h2 class="subtitle">Quel montant souhaitez-vous proposer au vendeur ?</h2>

    <p class="content warning">
      <fa-icon [icon]="['fas', 'info-circle']"></fa-icon> Le vendeur pourra accepter ou refuser votre offre, mais aussi vous faire une nouvelle proposition de prix.<br>
      Attention : vous ne pouvez négocier qu'une seule fois et n'aurez pas la possibilité de négocier de nouveau avec le vendeur.<br>
      Ne laissez pas passer votre chance si le prix est intéressant. :-)
    </p>

    <div class="columns is-vcentered">
      <div class="column has-text-weight-bold">
        Montant à proposer au vendeur :
      </div>

      <div class="column">
        <div class="control has-icons-right">
          <input id="propositionPrice" class="input" type="number" placeholder="{{ sale.product.reservePrice }}" [(ngModel)]="sticky.proposedPrice" step="5" min="{{ minPrice }}" max="{{ maxPrice }}">
          <span class="icon is-small is-right">
            <fa-icon [icon]="['fas', 'euro-sign']"></fa-icon>
          </span>
        </div>
      </div>

      <div class="column">
        <button class="button is-danger" (click)="placeBid(sticky.proposedPrice)">Envoyer ma proposition</button>
      </div>
    </div>
  </div>

  <!-- If a bid has already been placed -->
  <div *ngIf="hasBidded()" class="column">
    <div *ngIf="" class="content">
      Vous avez déjà fait une offre ! ;-) <br><br>
      Il ne reste plus qu'à patienter en attendant la réponse du vendeur :-)
    </div>

    <div *ngIf="isAccepted()" class="content">
      Votre offre a été <span class="accepted">acceptée !</span> :-) <br><br>
      Rendez-vous <a routerLink="/checkout">ici</a> pour effectuer le règlement !
    </div>

    <div *ngIf="isDeclined()" class="content">
      Votre offre a été <span class="declined">refusée !</span> ! ;-( <br><br>
      Vous ne pouvez plus faire de proposition néanmoins vous pouvez toujours acheter le produit au prix indiqué ! :-D
    </div>

    <div *ngIf="hasCounterOffer()" class="content">
      Votre offre a été <span class="counter-offer">contre-proposée</span> à <span class="amount">{{ currentPurchase.counterOfferAmount }}€</span> ! <br><br>
      Si cette contre-proposition vous convient, rendez-vous <a class="accepted" routerLink="/checkout">ici</a> pour effectuer le règlement !
    </div>

    <div class="content">
      <button class="button" (click)="goToSales()">Voir mes offres</button>
    </div>
  </div>

  <p class="content">
    <span *ngIf="sticky.proposedPrice < sticky.minPrice" class="warning"><fa-icon [icon]="['fas', 'exclamation-triangle']"></fa-icon> {{ errorMsg.lowPrice }}€.</span>
    <span *ngIf="sticky.proposedPrice > sticky.maxPrice" class="warning"><fa-icon [icon]="['fas', 'exclamation-triangle']"></fa-icon> {{ errorMsg.highPrice }}€.</span>
  </p>
  <button class="normal" (click)="sticky.previousStep()">Revenir au prix initial</button>
</div>
