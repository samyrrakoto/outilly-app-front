<h2 class="subtitle is-5 has-text-weight-bold">Une question ?</h2>

<div class="content">
  <button (click)="modals.open('ask-question')" class="button is-danger is-outlined no-overflow">Poser une question au vendeur</button>
</div>

<!-- MODALS -->

<div class="modal {{ modals.get('ask-question') }}">
  <div class="modal-background" (click)="modals.close('ask-question')"></div>
  <div class="modal-content">
    <div class="box">
      <h2 class="subtitle">Poser une question au vendeur</h2>

      <div class="content discreet-text">
        Maximum {{ maxQuestionLength }} caractères
      </div>

      <div class="content">
        <form [formGroup]="form">
          <textarea formControlName="userQuestion" class="textarea" [maxlength]=maxQuestionLength placeholder="Posez-votre question ici" [(ngModel)]="userQuestion"></textarea>
        </form>
      </div>

      <div *ngIf="controls.userQuestion.errors && userQuestion" class="content error">
        <span *ngIf="controls.userQuestion.errors.maxlength">Le message ne peut pas excéder {{ maxQuestionLength }}</span>
      </div>

      <div *ngFor="let errorMessage of productManager.errorMessages.errorMessages" class="message is-danger">
        {{ errorMessage }}
      </div>

      <div *ngIf="productManager.questionSent" class="notification is-success">
        Votre question a bien été envoyée !
      </div>

      <div *ngIf="!productManager.questionSent" class="content">
        <button *ngIf="!controls.userQuestion.errors" class="button is-success" (click)="productManager.askQuestion(productId, userQuestion)">Envoyer la question</button>
        <button *ngIf="controls.userQuestion.errors" class="button is-light">Envoyer la question</button>
      </div>
    </div>
  </div>
  <button class="modal-close is-large" aria-label="close" (click)="modals.close('ask-question')"></button>
</div>
