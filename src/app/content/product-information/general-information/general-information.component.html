<media-gallery
  [sale]="sale">
</media-gallery>

<h1 id="product-name" class="title is-2 has-text-weight-bold">{{ sale.product.name }}</h1>
<h2 id="brands" class="subtitle is-6">
  Marques :
  <span *ngFor="let brand of sale.product.brands; first as first; last as last" class="has-text-danger has-text-weight-bold">
    {{ brand.name }}<span *ngIf="!first"> </span><span *ngIf="!last" class="normal">,</span>
  </span>
</h2>

<!-- General information -->
<div *ngIf="sale" class="box">
  <h2 class="subtitle is-5 has-text-weight-bold has-text-centered">Informations générales</h2>

  <div class="columns">

    <!-- description -->
    <div class="column">
      <h2 class="subtitle has-text-weight-bold">Description du vendeur</h2>

      <div class="content is-size-6">
        <span *ngIf="!descriptionFlag && this.sale.product.description.length > this.maxVisibleLength" [innerHTML]="sale.product.description.slice(0, maxVisibleLength) + '<span class=\'declined\'>...</span>'"></span>
        <span *ngIf="descriptionFlag || !(this.sale.product.description.length > this.maxVisibleLength)" [innerHTML]="sale.product.description"></span>
     </div>

      <div class="content has-text-centered">
        <button *ngIf="this.sale.product.description.length > this.maxVisibleLength" class="button is-danger is-outlined" (click)="displayDescription()">
          <span *ngIf="!descriptionFlag">Lire la suite</span>
          <span *ngIf="descriptionFlag">Raccourcir</span>
        </button>
      </div>
    </div>

    <!-- vertical separation between the two parts -->
    <div class="is-divider-vertical"></div>

    <!-- technical information -->
    <div class="column has-text-centered">
      <div class="content is-centered">
        <table class="table">
          <tr>
            <td><fa-icon [icon]="['fas', 'search']"></fa-icon> Etat</td>
            <td>{{ this.sale.product.quality | quality }} <a class="has-text-danger" (click)="openModal('knowMore')"><fa-icon [icon]="['fas', 'info-circle']"></fa-icon></a></td>
          </tr>
          <tr>
            <td><fa-icon [icon]="['fas', 'weight-hanging']"></fa-icon> Poids</td>
            <td>{{ this.sale.product.weight | weight:'value' }} {{ this.sale.product.weight | weight:'unity' }}</td>
          </tr>
          <tr>
            <td><fa-icon [icon]="['fas', 'map-marker-alt']"></fa-icon> Où ?</td>
            <td><a [href]="getMapUrl()" rel="noopener" target="_blank">{{ this.sale.product.locality }}</a></td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</div>

<app-product-information-incentives></app-product-information-incentives>

<div id="predefined-questions" class="content">
  <predefined-question
    [sale]="sale">
  </predefined-question>
</div>

<!-- [Modal] Know more about products state -->
<div class="modal {{ modals.get('knowMore') }}">
  <div class="modal-background" (click)="closeModal('knowMore')"></div>
  <div class="modal-content">
    <div class="box">
      <h2 class="subtitle">Nous différencions 5 états de produits :</h2>

      <div class="content">
        <ol type="1">
          <li>Comme neuf</li>
          <li>Bon</li>
          <li>Correct</li>
          <li>Mauvais</li>
          <li>Très mauvais</li>
        </ol>
      </div>
    </div>
  </div>
  <button class="modal-close is-large" aria-label="close" (click)="closeModal('knowMore')"></button>
</div>

<!-- Media Modal -->
<div class="modal {{ media.modal }}">
  <div class="modal-background" (click)="closeMedia()"></div>
  <div class="modal-content">
    <div class="box">
      <figure class="image">
        <img src="{{ media.path }}">
      </figure>
    </div>
  </div>
  <button class="modal-close is-large" aria-label="close" (click)="closeMedia()"></button>
</div>
