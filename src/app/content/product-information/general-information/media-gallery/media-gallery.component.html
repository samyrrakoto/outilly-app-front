<div id="media-gallery" class="columns">

  <!-- Top pictures -->
  <div id="top-container" class="column">
    <div class="columns is-gapless is-centered is-mobile">
      <div *ngFor="let media of sale.product.productMedias.slice(0,3); index as i">
        <div class="column is-narrow">
          <img *ngIf="media.type === 'image'" class="top-thumbnail" src="{{ mediaBaseUri + media.path }}" (click)="openGalleryMedia(i, media.type)">
          <img *ngIf="media.type === 'video'" src="/assets/img/logo/play.png" class="top-thumbnail video-thumbnail" [ngStyle]="{ 'background-image': firstImage }" (click)="openGalleryMedia(i, media.type)">
        </div>
      </div>
    </div>
  </div>

  <!-- Side pictures -->
  <div *ngIf="sale.product.productMedias.length > 3" id="side-preview" class="column is-3 has-text-centered is-hidden-mobile">
    <div *ngFor="let media of sale.product.productMedias.slice(3,7); index as i" class="content">
      <div *ngIf="i < 3">
        <figure *ngIf="media.type === 'image'" class="image">
          <img src="{{ mediaBaseUri + media.path }}" (click)="openGalleryMedia(i, media.type)">
        </figure>

        <figure *ngIf="media.type === 'video'">
          <img src="assets/img/logo/play.png" (click)="openGalleryMedia(i, media.type)">
        </figure>
      </div>

      <div *ngIf="sale.product.productMedias.length > 7 && i === 3">
        <figure class="image">
          <img id="plus" src="assets/img/logo/plus.png" (click)="openGalleryMedia(i, media.type)">
        </figure>
      </div>
    </div>
  </div>
</div>

<!-- Media Modal -->
<div class="modal {{ media.modal }}">
  <div class="modal-background" (click)="closeMedia(); pauseVideo('demoVideo')"></div>
  <div class="modal-content">
    <div class="box has-background-black">
      <!-- media -->
      <figure *ngIf="media.type === 'image'" class="image">
        <img src="{{ mediaBaseUri + media.path }}">
      </figure>

      <figure class="video" *ngIf="media.type === 'video'">
        <video id="demoVideo" controls autoplay>
          <source src="{{ mediaBaseUri + media.path }}" type="video/mp4">
        </video>
      </figure>

      <!-- nav arrows -->
      <div class="columns is-mobile is-vcentered">
        <div class="column">
          <button class="button is-large has-background-black has-text-white" (click)="previousMedia()"><fa-icon [icon]="['fas','arrow-circle-left']"></fa-icon></button>
        </div>

        <div class="column has-text-right">
          <button class="button is-large has-background-black has-text-white" (click)="nextMedia()"><fa-icon [icon]="['fas','arrow-circle-right']"></fa-icon></button>
        </div>
      </div>
    </div>
  </div>
  <button class="modal-close is-large" aria-label="close" (click)="closeMedia(); pauseVideo('demoVideo')"></button>
</div>
